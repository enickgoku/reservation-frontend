(this["webpackJsonpstarter-restaurant-reservation-front-end"]=this["webpackJsonpstarter-restaurant-reservation-front-end"]||[]).push([[0],{11:function(e,t,a){"use strict";a.r(t),a.d(t,"listReservations",(function(){return h})),a.d(t,"listTables",(function(){return m})),a.d(t,"getReservation",(function(){return f})),a.d(t,"getTable",(function(){return p})),a.d(t,"createReservation",(function(){return y})),a.d(t,"updateReservation",(function(){return w})),a.d(t,"deleteReservation",(function(){return N})),a.d(t,"createTable",(function(){return D})),a.d(t,"updateTable",(function(){return k})),a.d(t,"deleteTable",(function(){return R})),a.d(t,"seatTable",(function(){return z})),a.d(t,"removeReservation",(function(){return I})),a.d(t,"finishReso",(function(){return U}));var n=a(3),r=a(7),c=a.n(r),s=a(19),i=/\d\d\d\d-\d\d-\d\d/;function l(e){return e.reservation_date=e.reservation_date.match(i)[0],e}function o(e){return Array.isArray(e)?e.map(l):l(e)}var b="http://localhost:5001",j=new Headers;function d(e,t,a){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,r.json();case 8:if(!(s=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:s.error}));case 11:return e.abrupt("return",s.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function h(e,t){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(b,"/reservations")),Object.entries(t).forEach((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1];return r.searchParams.append(a,c)})),e.next=4,d(r,{headers:j,signal:a},[]).then(o).then(o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(b,"/tables")),Object.entries(t).forEach((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1];return r.searchParams.append(a,c.toString())})),e.next=4,d(r,{headers:j,signal:a},[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/reservations/").concat(t)),e.next=3,d(n,{headers:j,signal:a},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/tables/").concat(t)),e.next=3,d(n,{headers:j,signal:a},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/reservations")),r={method:"POST",headers:j,body:JSON.stringify({data:t}),signal:a},e.next=4,d(n,r,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,a){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(b,"/reservations/").concat(a,"/edit")),s={method:"PUT",headers:j,body:JSON.stringify({data:t}),signal:n},e.next=4,d(r,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return C.apply(this,arguments)}function C(){return(C=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/reservations/").concat(t)),r={method:"DELETE",headers:j,signal:a},e.next=4,d(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/tables")),r={method:"POST",headers:j,body:JSON.stringify({data:t}),signal:a},e.next=4,d(n,r,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,a){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(b,"/tables/").concat(a,"/edit")),s={method:"PUT",headers:j,body:JSON.stringify({data:t}),signal:n},e.next=4,d(r,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/tables/").concat(t)),r={method:"DELETE",headers:j,signal:a},e.next=4,d(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/tables/").concat(a,"/seat")),r={method:"PUT",headers:j,body:JSON.stringify({data:{reservation_id:t}})},e.next=4,d(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return G.apply(this,arguments)}function G(){return(G=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/tables/").concat(t,"/seat")),r={method:"DELETE",headers:j,body:JSON.stringify({data:{reservation_id:a}})},e.next=4,d(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(b,"/reservations/").concat(t,"/status")),r={method:"PUT",headers:j,body:JSON.stringify({data:{status:a}})},e.next=4,d(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}j.append("Content-Type","application/json")},52:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(27),s=a.n(c),i=a(12),l=a(3),o=a(26),b=a(34),j=a(50),d=(a(52),a(0));var u=function(){var e=[{name:"Dashboard",url:"/dashboard"},{name:"New Reservation",url:"/reservations/new"},{name:"New Table",url:"/tables/new"},{name:"Search",url:"/search"}].map((function(e,t){return Object(d.jsx)(j.a.Item,{href:e.url,children:e.name},t)}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(b.a,{children:Object(d.jsx)(o.a,{className:"d-flex align-items-center justify-content-between flex-lg-row",children:Object(d.jsxs)(j.a,{className:"mt-10 d-flex justify-content-start",children:[Object(d.jsx)(j.a.Toggle,{className:"btn btn-secondary dropdown-toggle mt-2 mb-2",variant:"dark",style:{fontSize:"1.5rem"},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-list align-items-center justify-content-center mb-1",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})})}),Object(d.jsx)(j.a.Menu,{children:e})]})})})})},h=a(16),O=a(15);var m=function(e){var t=e.currentDate,a=e.dateSetting,n=e.currentTime,r=O.DateTime.fromISO(a).toFormat("DDDD"),c=O.DateTime.fromISO(n).toFormat("t"),s=a<t?"text-muted":null;return Object(d.jsxs)(o.a,{className:"d-flex flex-row align-items-between justify-content-between",children:[Object(d.jsx)(h.b,{className:"links",to:"/dashboard",children:Object(d.jsx)("h1",{className:"menu-h1",children:"Periodic Tables"})}),Object(d.jsxs)("div",{className:"d-flex flex-col",children:[Object(d.jsx)("span",{style:{fontSize:"2rem"},children:c}),Object(d.jsx)("span",{className:s,children:r})]})]})},x=a(2),f=a(11),v=a(10);var p=function(e){var t=e.error;return t&&Object(d.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})},g=a(9),y=a(24),_=a(41);function w(e){var t=e.loadDashboard,a=Object(i.g)(),r=Object(n.useState)({}),c=Object(l.a)(r,2),s=c[0],b=c[1],j=Object(n.useState)(null),u=Object(l.a)(j,2),h=u[0],O=u[1],m=function(e){var t=e.target;O(null),b(Object(x.a)(Object(x.a)({},s),{},Object(v.a)({},t.name,t.value)))},w={table_name:s.table_name,capacity:+s.capacity,reservation_id:null};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.a,{sm:8,md:6,lg:5,xl:5,className:"mb-5",children:[Object(d.jsx)(p,{error:h}),Object(d.jsx)("h1",{className:"d-flex justify-content-center",children:"Create Table"}),Object(d.jsxs)(g.a,{children:[Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"table_name",children:"Table Name: "}),Object(d.jsx)(g.a.Control,{id:"table_name",required:!0,name:"table_name",type:"text",placeholder:"Ex. Table 1",onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"capacity",children:"Capacity: "}),Object(d.jsx)(g.a.Control,{id:"capacity",required:!0,name:"capacity",type:"number",placeholder:"6",onChange:m})]}),Object(d.jsxs)(_.a,{className:"mt-4 w-100",children:[Object(d.jsx)(y.a,{variant:"dark",size:"lg",className:"col-3",onClick:function(){a.goBack()},children:"Cancel"}),Object(d.jsx)(y.a,{variant:"success",size:"lg",type:"submit",onClick:function(e){e.preventDefault(),Object(f.createTable)(w).then((function(){return t()})).then((function(){return a.push("/dashboard")})).catch(O)},children:"Submit"})]}),Object(d.jsx)("br",{})]})]})})}function S(e){var t=e.setTables,a=Object(i.g)(),r=Object(i.h)().table_id,c=Object(n.useState)({table_name:"",capacity:"",reservation_id:null}),s=Object(l.a)(c,2),b=s[0],j=s[1],u=Object(n.useState)({}),h=Object(l.a)(u,2),O=h[0],m=h[1],w=Object(n.useState)(null),S=Object(l.a)(w,2),N=S[0],C=S[1];Object(n.useEffect)((function(){var e=new AbortController;return Object(f.getTable)(r,e.signal).then(j).catch(C),function(){return e.abort()}}),[b.capacity,b.table_name,r]),Object(n.useEffect)((function(){m({table_name:b.table_name,capacity:b.capacity,reservation_id:null})}),[b]);var D=function(e){var t=e.currentTarget;C(null),m(Object(x.a)(Object(x.a)({},O),{},Object(v.a)({},t.name,t.value)))},T={table_name:O.table_name,capacity:O.capacity,reservation_id:b.reservation_id};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.a,{sm:8,md:6,lg:5,xl:5,className:"mb-5",children:[Object(d.jsx)(p,{error:N}),Object(d.jsx)("h1",{className:"d-flex justify-content-center",children:"Edit Table"}),Object(d.jsxs)(g.a,{onSubmit:function(e){e.preventDefault();var n=new AbortController;return Object(f.updateTable)(T,r,n.signal).then(t).then((function(){return a.push("/")})).catch(C),function(){return n.abort()}},children:[Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"table_name",children:"Table Name: "}),Object(d.jsx)(g.a.Control,{id:"table_name",required:!0,name:"table_name",type:"text",defaultValue:b.table_name,onChange:D})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Capacity"}),Object(d.jsx)(g.a.Control,{id:"capacity",required:!0,name:"capacity",type:"number",defaultValue:b.capacity,onChange:D})]}),Object(d.jsxs)(_.a,{className:"mt-4 w-100",children:[Object(d.jsx)(y.a,{variant:"dark",size:"lg",className:"col-3",onClick:function(){a.goBack()},children:"Cancel"}),Object(d.jsx)(y.a,{variant:"danger",size:"lg",onClick:function(e){e.preventDefault();var n="Are you sure you want to delete table ".concat(b.table_name,"?");if(window.confirm(n)){var c=new AbortController;return Object(f.deleteTable)(r,c.signal).then(t).then((function(){return a.push("/")})).catch(C),function(){return c.abort()}}},children:"Delete"}),Object(d.jsx)(y.a,{variant:"success",size:"lg",type:"submit",children:"Submit"})]})]})]})})}function N(e){var t=Object(i.i)("/tables/new"),a=Object(i.i)("/tables/:table_id/edit");return Object(d.jsxs)(d.Fragment,{children:[t?Object(d.jsx)(w,Object(x.a)({},e)):null,a?Object(d.jsx)(S,Object(x.a)({},e)):null]})}var C=function(e){e.loadDashboard;var t=e.setDateSetting,a=(e.dateSetting,Object(i.g)()),r=Object(n.useState)({}),c=Object(l.a)(r,2),s=c[0],b=c[1],j=Object(n.useState)(null),u=Object(l.a)(j,2),h=u[0],O=u[1],m=function(e){var t=e.target;O(null),b(Object(x.a)(Object(x.a)({},s),{},Object(v.a)({},t.name,t.value)))};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.a,{sm:8,md:6,lg:5,xl:5,className:"mb-5 bg-secondary text-white",children:[Object(d.jsx)(p,{error:h}),Object(d.jsx)("h1",{className:"d-flex justify-content-center",children:"Create Reservation"}),Object(d.jsxs)(g.a,{onSubmit:function(e){e.preventDefault();var n={first_name:s.first_name,last_name:s.last_name,mobile_number:s.mobile_number,reservation_date:s.reservation_date,reservation_time:s.reservation_time,people:parseInt(s.people)},r=new AbortController;return Object(f.createReservation)(n,r.signal).then((function(){t(n.reservation_date),a.push("/dashboard")})).catch(O),function(){return r.abort()}},children:[Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"first_name",children:"First Name"}),Object(d.jsx)(g.a.Control,{id:"first_name",required:!0,name:"first_name",type:"first_name",placeholder:"First Name",onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Last Name"}),Object(d.jsx)(g.a.Control,{id:"last_name",required:!0,name:"last_name",type:"last_name",placeholder:"Last Name",onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"mobile_number",children:"Mobile Number"}),Object(d.jsx)(g.a.Control,{id:"mobile_number",required:!0,name:"mobile_number",type:"tel",placeholder:"Mobile Number",onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"reservation_date",children:"Reservation Date:"}),Object(d.jsx)(g.a.Control,{id:"reservation_date",type:"date",name:"reservation_date",required:!0,onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"reservation_time",children:"Reservation Time:"}),Object(d.jsx)(g.a.Control,{id:"reservation_time",type:"time",name:"reservation_time",size:"lg",required:!0,onChange:m})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"people",children:"Number of Guests"}),Object(d.jsx)(g.a.Control,{id:"people",type:"number",name:"people",size:"lg",required:!0,onChange:m})]}),Object(d.jsxs)(_.a,{"aria-label":"Basic example",className:"mt-4 w-100",children:[Object(d.jsx)(y.a,{variant:"dark",type:"cancel",onClick:function(){a.goBack()},children:"Cancel"}),Object(d.jsx)(y.a,{variant:"success",type:"submit",children:"Submit"})]})]})]})})};function D(){return Object(d.jsx)("div",{className:"d-flex justify-content-center",children:Object(d.jsx)("div",{className:"spinner-border",role:"status",children:Object(d.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var T=a(11),k=T.deleteReservation,F=T.updateReservation,R=T.getReservation;var L=function(e){var t=e.loadDashboard,a=e.setDateSetting,r=Object(i.g)(),c=Object(i.h)().reservation_id,s=Object(n.useState)(null),b=Object(l.a)(s,2),j=b[0],u=b[1],h=Object(n.useState)({}),m=Object(l.a)(h,2),f=m[0],w=m[1];Object(n.useEffect)((function(){var e=new AbortController;return R(c,e.signal).then(w).catch(u),function(){return e.abort()}}),[c]);var S=function(e){var t=e.currentTarget;u(null),w(Object(x.a)(Object(x.a)({},f),{},Object(v.a)({},t.name,t.value)))},N=(null===f||void 0===f?void 0:f.reservation_date)?O.DateTime.fromISO(f.reservation_date).toFormat("yyyy-MM-dd"):"";return f?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.a,{sm:8,md:6,lg:5,xl:5,className:"mb-5",children:[Object(d.jsx)(p,{error:j}),Object(d.jsx)("h1",{className:"d-flex justify-content-center",children:"Edit Reservation"}),Object(d.jsxs)(g.a,{onSubmit:function(e){e.preventDefault();var t={first_name:f.first_name,last_name:f.last_name,mobile_number:f.mobile_number,reservation_date:f.reservation_date,reservation_time:f.reservation_time,people:parseInt(f.people),status:"booked"};F(t,c).then((function(){return a(t.reservation_date)})).then((function(){return r.push("/dashboard")})).catch(u)},children:[Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"first_name",children:"First Name"}),Object(d.jsx)(g.a.Control,{id:"first_name",required:!0,name:"first_name",type:"first_name",defaultValue:f.first_name,onChange:S})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Last Name"}),Object(d.jsx)(g.a.Control,{id:"last_name",required:!0,name:"last_name",type:"last_name",defaultValue:null===f||void 0===f?void 0:f.last_name,onChange:S})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"mobile_number",children:"Mobile Number"}),Object(d.jsx)(g.a.Control,{id:"mobile_number",required:!0,name:"mobile_number",type:"tel",defaultValue:null===f||void 0===f?void 0:f.mobile_number,onChange:S})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"reservation_date",children:"Reservation Date:"}),Object(d.jsx)(g.a.Control,{id:"reservation_date",type:"date",name:"reservation_date",required:!0,defaultValue:N,onChange:S})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"reservation_time",children:"Reservation Time:"}),Object(d.jsx)(g.a.Control,{id:"reservation_time",type:"time",name:"reservation_time",size:"lg",required:!0,defaultValue:null===f||void 0===f?void 0:f.reservation_time,onChange:S})]}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{htmlFor:"people",children:"Number of Guests"}),Object(d.jsx)(g.a.Control,{id:"people",type:"number",name:"people",size:"lg",required:!0,defaultValue:null===f||void 0===f?void 0:f.people,onChange:S})]}),Object(d.jsxs)(_.a,{"aria-label":"Basic example",className:"mt-4 w-100",children:[Object(d.jsx)(y.a,{variant:"dark",type:"button",onClick:function(){t(),r.push("/dashboard")},children:"Cancel"}),Object(d.jsx)(y.a,{variant:"danger",type:"button",onClick:function(){window.confirm("Do you want to delete this reservation? This cannot be undone.")&&k(c).then((function(){return r.push("/dashboard")})).catch(u)},children:"Delete"}),Object(d.jsx)(y.a,{variant:"success",type:"submit",children:"Submit"})]})]})]})}):Object(d.jsx)(D,{})};function z(e){var t=Object(i.i)("/reservations/new"),a=Object(i.i)("/reservations/:reservation_id/edit");return Object(d.jsxs)(d.Fragment,{children:[t?Object(d.jsx)(C,Object(x.a)({},e)):null,a?Object(d.jsx)(L,Object(x.a)({},e)):null]})}var E=a(49),I=a(51);function G(e){var t=e.reservations,a=e.loadDashboard,n=Object(i.g)(),r=t.reservation_id;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(_.a,{vertical:!0,children:["booked"===t.status?Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"reservation-".concat(t.reservation_id,"-seat-tooltip"),children:"Seat"}),children:Object(d.jsxs)(y.a,{variant:"dark",className:"d-flex align-items-center text-muted",style:{fontSize:"1.2rem"},href:"/reservations/".concat(r,"/seat"),children:[Object(d.jsx)("i",{className:"ri-map-pin-user-fill"}),"Seat"]})}):null,"seated"===t.status?Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"reservation-".concat(t.reservation_id,"-finish-tooltip"),children:"Finish"}),children:Object(d.jsxs)(y.a,{as:"a",variant:"dark",className:"d-flex align-items-center text-muted",style:{fontSize:"1.2rem"},"data-reservation-id-status":t.reservation_id,onClick:function(e){e.preventDefault();if(window.confirm("Is this reservation finished? This cannot be undone.")){var r=new AbortController;Object(f.finishReso)(t.reservation_id,"finished",r.signal).then((function(){return a()})).then((function(){return n.push("/dashboard")})).catch(console.log)}},children:[Object(d.jsx)("i",{className:"ri-close-circle-fill"}),"Finish"]})}):null,Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"reservation-".concat(t.reservation_id,"-edit-tooltip"),children:"Edit"}),children:Object(d.jsxs)(y.a,{as:"a",variant:"dark",className:"d-flex align-items-center text-muted",style:{fontSize:"1.2rem"},href:"/reservations/".concat(r,"/edit"),children:[Object(d.jsx)("i",{className:"ri-pencil-line"}),"Edit"]})}),Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"reservation-".concat(t.reservation_id,"-cancel-tooltip"),children:"Cancel"}),children:Object(d.jsxs)(y.a,{as:"a",variant:"dark",className:"d-flex align-items-center text-muted",style:{fontSize:"1.2rem"},"data-reservation-id-cancel":"".concat(t.reservation_id),onClick:function(e){e.preventDefault();window.confirm("Do you want to cancel this reservation?")&&Object(f.finishReso)(t.reservation_id,"cancelled").then((function(){return a()})).then((function(){return n.push("/dashboard")})).catch(console.log)},children:[Object(d.jsx)("i",{className:"ri-close-circle-fill"}),"Cancel"]})})]})})}var U=a(90);function q(e){var t=e.loadDashboard,a=e.reservations;if(!a)return Object(d.jsx)(D,{});var n=O.DateTime.fromISO(a.reservation_date).toFormat("DDD"),r=O.DateTime.fromISO(a.reservation_time).toFormat("t"),c="seated"===a.status?"border border-danger border-5":"";return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(U.a,{style:{width:"18rem"},className:"bg-secondary text-white ".concat(c),children:Object(d.jsxs)(U.a.Body,{children:[Object(d.jsx)(U.a.Title,{children:a.first_name}),Object(d.jsx)(U.a.Title,{children:a.last_name}),Object(d.jsxs)(U.a.Text,{children:["Set for ",n," at ",r]}),Object(d.jsxs)(U.a.Text,{children:["Party of ",a.people]}),Object(d.jsxs)(U.a.Text,{"data-reservation-id-status":a.reservation_id,children:["Status: ",a.status]}),Object(d.jsx)(U.a.Footer,{className:"d-flex justify-content-center p-0",children:Object(d.jsx)(G,{reservations:a,loadDashboard:t})})]})})})}function A(e){var t=e.setDateSetting,a=e.setReservationsFilter,n=e.dateSetting,r=e.loadDashboard,c=e.currentDate;return Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{onClick:function(){return t((function(){return O.DateTime.fromISO(n).minus({days:1}).toISODate()})),void r()},children:Object(d.jsx)("i",{className:"ri-arrow-left-s-line"})}),Object(d.jsx)(y.a,{onClick:function(){return t((function(){return c})),void r()},children:Object(d.jsx)("i",{className:"ri-home-line"})}),Object(d.jsx)(y.a,{onClick:function(){return t((function(){return O.DateTime.fromISO(n).plus({days:1}).toISODate()})),void r()},children:Object(d.jsx)("i",{className:"ri-arrow-right-s-line"})}),Object(d.jsxs)(j.a,{className:"mt-10 d-flex justify-content-start",children:[Object(d.jsx)(j.a.Toggle,{className:"btn btn-secondary dropdown-toggle mt-2 mb-2",variant:"dark",style:{fontSize:"1.5rem"},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})})}),Object(d.jsxs)(j.a.Menu,{children:[Object(d.jsx)(j.a.Item,{className:"text-muted",children:"Filter"}),Object(d.jsx)(j.a.Item,{onClick:function(){return a("all")},children:"All"}),Object(d.jsx)(j.a.Item,{onClick:function(){return a("booked")},children:"Booked"}),Object(d.jsx)(j.a.Item,{onClick:function(){return a("seated")},children:"Seated"}),Object(d.jsx)(j.a.Divider,{}),Object(d.jsx)(j.a.Header,{children:"History"}),Object(d.jsx)(j.a.Item,{onClick:function(){return a("finished")},children:"Finished"}),Object(d.jsx)(j.a.Item,{onClick:function(){return a("cancelled")},children:"Cancelled"})]})]})]})}function M(e){var t=e.reservations,a=e.dateSetting,r=e.currentDate,c=e.setReservationsFilter,s=e.setDateSetting,i=e.loadDashboard,o=e.tables,b=Object(n.useState)([]),j=Object(l.a)(b,2),u=j[0],h=j[1],O=Object(n.useState)(null),m=Object(l.a)(O,2),x=m[0],f=m[1],v=Object(n.useState)(!0),g=Object(l.a)(v,2),y=g[0],_=g[1];return Object(n.useEffect)((function(){f(null),h(t),_(!1)}),[t,a]),y||x?Object(d.jsx)(D,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(A,{currentDate:r,dateSetting:a,setDateSetting:s,setReservationsFilter:c,loadDashboard:i,reservations:t}),Object(d.jsx)(p,{error:x}),u.map((function(e){return Object(d.jsx)(q,{reservations:e,loadDashboard:i,tables:o},e.reservation_id)}))]})}function B(e){var t=e.setDateSetting,a=e.loadDashboard,r=Object(i.g)(),c=Object(i.h)().reservation_id,s=Object(n.useState)([]),b=Object(l.a)(s,2),j=b[0],u=b[1],h=Object(n.useState)(null),O=Object(l.a)(h,2),m=O[0],x=O[1],w=Object(n.useState)({}),S=Object(l.a)(w,2),N=S[0],C=S[1],D=Object(n.useState)({}),T=Object(l.a)(D,2),k=T[0],F=T[1];Object(n.useEffect)((function(){var e=new AbortController;return Object(f.getReservation)(c,e.signal).then((function(e){F(e),t(e.reservation_date)})).catch(x),Object(f.listTables)({status:"free"},e.signal).then(u).catch(x),function(){return e.abort()}}),[c,t]);var R=j.map((function(e,t){return Object(d.jsx)("option",{value:null===e||void 0===e?void 0:e.table_id,children:"".concat(null===e||void 0===e?void 0:e.table_name," - ").concat(null===e||void 0===e?void 0:e.capacity)},t)}));return Object(d.jsxs)(o.a,{className:"col col-sm-8 col-md-6 col-lg-5 col-xl-4",children:[Object(d.jsx)(p,{error:m}),Object(d.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),Object(f.seatTable)(c,N.table_id).then((function(){t(k.reservation_date),a(),r.push("/dashboard")})).catch(x)},children:[Object(d.jsxs)(g.a.Group,{controlId:"table_id",children:[Object(d.jsx)(g.a.Label,{children:"Select Table:"}),Object(d.jsxs)(g.a.Control,{as:"select",name:"table_id",size:"lg",placeholder:"Select Table",required:!0,onChange:function(e){var t=e.target;x(null),C(Object(v.a)({},t.name,t.value))},children:[Object(d.jsx)("option",{name:"table_id",value:"",defaultValue:!0,children:"---"}),R]})]}),Object(d.jsxs)(_.a,{className:"mt-4 w-100",children:[Object(d.jsx)(y.a,{variant:"dark",size:"lg",className:"col-3",onClick:function(){r.goBack()},children:"Cancel"}),Object(d.jsx)(y.a,{variant:"success",size:"lg",type:"submit",children:"Submit"})]})]})]})}function P(e){var t=e.table,a=e.setTablesError,n=e.loadDashboard,r=Object(i.g)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(_.a,{vertical:!0,children:[t.reservation_id?Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"table-".concat(t.table_id,"-dismiss-tooltip"),children:"Finish"}),children:Object(d.jsxs)(y.a,{variant:"dark",className:"d-flex align-items-center text-muted border border-list-bg","data-table-id-finish":t.table_id,style:{fontSize:"1.2rem"},onClick:function(){window.confirm("Is this table ready to seat new guests? This cannot be undone.")&&Object(f.removeReservation)(t.table_id,t.reservation_id).then((function(){return n()})).then((function(){return r.push("/tables")})).catch(a)},children:[Object(d.jsx)("i",{className:"ri-user-unfollow-fill"}),"Finish"]})}):null,Object(d.jsx)(I.a,{transition:!1,placement:"left",overlay:Object(d.jsx)(E.a,{id:"table-".concat(t.table_id,"-edit-tooltip"),children:"Edit"}),children:Object(d.jsx)(y.a,{variant:"dark",className:"d-flex align-items-center text-muted border border-list-bg",style:{fontSize:"1.2rem"},href:"/tables/".concat(t.table_id,"/edit"),children:Object(d.jsx)("i",{className:"ri-pencil-line"})})})]})})}function J(e){var t=e.table,a=e.loadDashboard,n=t.reservation_id?"Occupied":"Free",r=(null===t||void 0===t?void 0:t.reservation_id)?"border border-danger border-5":"";return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(U.a,{style:{width:"18rem"},className:"".concat(r),children:Object(d.jsxs)(U.a.Body,{className:"text-dark",children:[Object(d.jsxs)(U.a.Title,{children:["Table Name: ",null===t||void 0===t?void 0:t.table_name]}),Object(d.jsxs)(U.a.Title,{children:["Capacity: ",null===t||void 0===t?void 0:t.capacity]}),Object(d.jsxs)(U.a.Text,{"data-table-id-status":t.table_id,children:["Status: ",n]}),Object(d.jsx)(P,{table:t,loadDashboard:a})]})})})}function V(e){var t=e.setTablesFilter;return Object(d.jsx)("div",{children:Object(d.jsxs)(j.a,{className:"mt-10 d-flex justify-content-start",children:[Object(d.jsx)(j.a.Toggle,{className:"btn btn-secondary dropdown-toggle mt-2 mb-2",variant:"dark",style:{fontSize:"1.5rem"},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots-vertical",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})})}),Object(d.jsxs)(j.a.Menu,{children:[Object(d.jsx)(j.a.Item,{className:"text-muted",children:"Filter"}),Object(d.jsx)(j.a.Item,{onClick:function(){return t("all")},children:"All"}),Object(d.jsx)(j.a.Item,{onClick:function(){return t("free")},children:"Free"}),Object(d.jsx)(j.a.Item,{onClick:function(){return t("occupied")},children:"Occupied"})]})]})})}function H(e){var t=e.tables,a=e.tablesError,n=e.setTablesFilter,r=e.loadDashboard;return t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(V,{setTablesFilter:n}),Object(d.jsx)(p,{error:a}),t.map((function(e){return Object(d.jsx)(J,{table:e,loadDashboard:r},e.table_id)}))]}):Object(d.jsx)(D,{})}var Z=function(e){var t=e.setDateSetting,a=e.currentDate,r=e.dateSetting,c=Object(n.useState)([]),s=Object(l.a)(c,2),o=s[0],j=s[1],u=Object(n.useState)(null),h=Object(l.a)(u,2),O=h[0],m=h[1],v=Object(n.useState)("all"),p=Object(l.a)(v,2),g=p[0],y=p[1],_=Object(n.useState)([]),w=Object(l.a)(_,2),S=w[0],C=w[1],T=Object(n.useState)(null),k=Object(l.a)(T,2),F=k[0],R=k[1],L=Object(n.useState)("all"),E=Object(l.a)(L,2),I=E[0],G=E[1];function U(){var e=new AbortController,t={};return"all"!==I&&(t.status=I),m(null),Object(f.listTables)(t,e.signal).then(C).catch(R),Object(f.listReservations)({date:r,phase:g},e.signal).then(j).catch(m),function(){return e.abort()}}return Object(n.useEffect)(U,[r,g,I,a]),o&&S?Object(d.jsx)(b.a,{className:"d-flex flex-column align-items-center flex-md-row justify-content-md-center align-items-md-start w-100",children:Object(d.jsxs)(i.d,{children:[Object(d.jsxs)(i.b,{exact:!0,path:["/reservations","/tables","/dashboard"],children:[Object(d.jsx)(H,{tables:S,tablesError:F,setTablesFilter:G,loadDashboard:U}),Object(d.jsx)(M,{loadDashboard:U,dateSetting:r,currentDate:a,reservations:o,reservationsError:O,setReservationsFilter:y,setDateSetting:t,reservationsFilter:g})]}),Object(d.jsx)(i.b,{exact:!0,path:"/reservations/new",children:Object(d.jsx)(z,{loadDashboard:U,dateSetting:r,setDateSetting:t})}),Object(d.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/edit",children:Object(d.jsx)(z,{setReservations:j,reservations:o,currentDate:a,loadDashboard:U,dateSetting:r,setDateSetting:t,reservationsFilter:g})}),Object(d.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/seat",children:Object(d.jsx)(B,Object(x.a)(Object(x.a)({},e),{},{loadDashboard:U}))}),Object(d.jsx)(i.b,{exact:!0,path:"/tables",children:Object(d.jsx)(i.a,{to:"/dashboard"})}),Object(d.jsx)(i.b,{exact:!0,path:"/tables/new",children:Object(d.jsx)(N,{setTables:C,dateSetting:r,setDateSetting:t,loadDashboard:U})}),Object(d.jsx)(i.b,{exact:!0,path:"/tables/:table_id/edit",children:Object(d.jsx)(N,{setTables:C,dateSetting:r,setDateSetting:t})})]})}):Object(d.jsx)(D,{})};var K=function(){return Object(d.jsx)("div",{className:"NotFound",children:Object(d.jsx)("h1",{children:"Not Found"})})},Q=a(89);function W(){var e=Object(i.g)(),t=Object(n.useState)(null),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({}),o=Object(l.a)(s,2),b=o[0],j=o[1],u=Object(n.useState)(""),h=Object(l.a)(u,2),O=h[0],m=h[1],w=Object(n.useState)(""),S=Object(l.a)(w,2),N=S[0],C=S[1];return Object(n.useEffect)((function(){O.length?C(O.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsx)(q,{reservations:e})},e.reservation_id)}))):""!==O&&C(Object(d.jsx)("div",{children:Object(d.jsx)("h3",{children:"No reservations found"})}))}),[O]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{error:r}),Object(d.jsxs)(g.a,{onSubmit:function(e){C(Object(d.jsx)(D,{}));var t=new AbortController;return e.preventDefault(),Object(f.listReservations)(b,t.signal).then(m).catch(c),function(){return t.abort()}},children:[Object(d.jsxs)(Q.a,{className:"mb-3",children:[Object(d.jsx)("label",{children:"Search Reservations with a phone number"}),Object(d.jsx)(Q.a.Text,{id:"mobile_number",className:"w-100 bg-dark text-white",children:"Search"}),Object(d.jsx)(g.a.Control,{type:"text",placeholder:"Mobile Number","aria-label":"Mobile Number","aria-describedby":"basic-addon1",name:"mobile_number",onChange:function(e){var t=e.target;c(null),j(Object(x.a)(Object(x.a)({},b),{},Object(v.a)({},t.name,t.value)))}})]}),Object(d.jsxs)(_.a,{children:[Object(d.jsx)(y.a,{type:"submit",variant:"success",children:"Submit"}),Object(d.jsx)(y.a,{type:"button",variant:"danger",onClick:function(){e.goBack()},children:"Cancel"})]})]}),Object(d.jsx)("div",{className:"d-flex",children:N})]})}var X=function(e){return Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",children:Object(d.jsx)(i.a,{to:"/dashboard"})}),Object(d.jsx)(i.b,{path:["/reservations","/tables","/dashboard"],children:Object(d.jsx)(Z,Object(x.a)({className:"bg-secondary text-white"},e))}),Object(d.jsx)(i.b,{exact:!0,path:"/search",children:Object(d.jsx)(W,{})}),Object(d.jsx)(i.b,{children:Object(d.jsx)(K,{})})]})},Y=a(66);O.Settings.defaultZoneName="America/Michigan";var $=function(){var e=new URLSearchParams(window.location.search),t=Object(n.useState)(O.DateTime.local().toISODate()),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(O.DateTime.local().toFormat("T")),i=Object(l.a)(s,2),j=i[0],h=i[1],x=Object(n.useState)(e.get("date")||r),f=Object(l.a)(x,2),v=f[0],p=f[1];return setInterval((function(){c(O.DateTime.local().toISODate()),h(O.DateTime.local().toFormat("T"))}),1e3),Object(d.jsxs)(Y.a,{fluid:!0,className:"layout bg-secondary text-white",children:[Object(d.jsx)(b.a,{className:"bg-secondary text-white",children:Object(d.jsxs)(o.a,{className:"d-flex align-items-end bg-secondary text-white",children:[Object(d.jsx)(u,{}),Object(d.jsx)(m,{currentDate:r,currentTime:j,dateSetting:v})]})}),Object(d.jsx)(b.a,{className:"bg-secondary text-white",children:Object(d.jsx)(o.a,{xs:12,className:"d-flex justify-content-center align-items-center bg-secondary text-white p-0",children:Object(d.jsx)(X,{currentDate:r,dateSetting:v,setDateSetting:p,currentTime:j})})})]})};a(81);var ee=function(){return Object(d.jsx)(i.d,{children:Object(d.jsx)(i.b,{path:"/",children:Object(d.jsx)($,{})})})};a(82);s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(h.a,{children:Object(d.jsx)(ee,{})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.9879a672.chunk.js.map